
// Containers
//
// Styleguide 15

@mixin container() {

	padding: $spacing-inner;
	margin: $spacing-outer auto;

	header,
	footer {
		padding: 0;
		margin: 0;
	}

	form {
		max-width: 100%;
	}

	header .subheading {
		margin: 0;
	}

	& > *:first-child {
		margin-top: 0;
		padding-top: 0;
	}

	& > *:last-child {
		margin-bottom: 0;
		padding-bottom: 0;
	}

	& > form:nth-of-type(n) {
		padding: $spacing-inner;
		.has-buttons {
			margin-top: $spacing-inner;
		}
	}

}



// Sections and Articles
//
// __Styleguide 15.1

section,
article {
	padding: $spacing-inner 0;
	margin-bottom: $spacing-outer;
}

header {
	padding: $spacing-inner 0;
}


// Panels
//
// Panels are general groupings of content that need to be separated
// from the main flow of copy on a page, to either highlight content
// or direct a user towards areas to learn more via a CTA.
//
// Ideally there should not be more than 2-3 panels per page, since
// their point is to highlight content, and if everything is
// highlighted, nothing is.
//
// PatternType: organism
//
// ContainsPatterns: Links, Images, Titles, Body Copy, Cards, Navigation, Forms
//
// Markup: container_panel.html
//
// __Styleguide 15.2

.panel,
.panel-fullbleed {

	background: $panel-background-primary;
	border: $border-width-primary solid $border-color-primary;

	p,
	ul,
	img {
		margin: $spacing-inner 0;
	}

	%form-field {
		background: lighten($panel-background-primary, 15%);
	}

}

.panel {
	@include container;
	@include width-capped();
	margin: $spacing-outer 0;
}

.panel-fullbleed {
	@extend .panel;
	@include width-fullbleed();
	margin-top: $spacing-outer;
	margin-bottom: $spacing-outer;
	border-left: none;
	border-right: none;
}



// Cards
//
// Cards should contain a maximum of four types of atoms. Cards are
// basically beefed-up CTAs, so if a situation requires more content,
// a different pattern should be leveraged instead (eg. panel).
//
// PatternType: molecule
//
// ContainsPatterns: Links, Images, Titles
//
// Markup: cards.html
// 
// Styleguide 15.3

.card {
	
	@include container;

	position: relative;
	text-align: left;
	padding: 0;

	// To account for spacing between cards, each
	// card needs an initial direct child. This 
	// can be any element (div, anchor, etc) that
	// makes the most sense for a given use.

	& > * {

		max-width:100%;
		display: block;
		margin: $spacing-inner*1.5;
		box-shadow: 0 3px 5px 2px #ccc;

		& > *:first-child {
			margin: 0;
		}

		& > *:last-child {
			margin-bottom: 0;
		}

	}

	%titles,
	.subheading {
		margin: 0;
	}

	%titles {
		line-height: 1em;
	}

	img {
		width:100%;
		max-width: 100%;
		height: auto;
	}

	// Should always be the direct and only child of the card.
	a.card__link {

		@include flexbox();
		@include flex-direction(column);

		border-bottom: 2px solid $background-color-primary;
		font-style: normal;
		font-weight: $font-weight-normal;
		text-decoration: none;

		&:hover {
			border-color: $site-action-color;
			color: $font-color-primary;
			text-decoration: none;
		}
	}

	.card__copy {
		padding: $spacing-inner;
		background: $background-color-primary;
		@include flex(1);

		& > *:last-child {
			margin-bottom: 0;
		}

	}

}

.has-cards {

	@include flexbox();
	@include flex-direction(row);
	@include flex-wrap(wrap);

	list-style-type: none;

	margin: 1.5rem 0;

	@media screen and (min-width: $screen-small) {
		margin: 1.5rem -0.75rem;
	}

	@media screen and (min-width: $screen-medium) {
		margin: 1.5rem -1.5rem 1.5rem -1rem
	}

	@media screen and (min-width: $screen-large) {
		margin: 1.5rem -2rem 1.5rem -1.5rem
	}

	.card {
		
		width: 100%;
		margin: 0;
		@include flexbox();
		@include align-content(column);

		& > * {
			margin: $spacing-inner 0;
		}

		@media screen and (min-width: $screen-micro) {
			& > * {
				margin: $spacing-inner $spacing-inner/4;
			}
		}

		@media screen and (min-width: $screen-small) {
			width: 50%;
			& > * {
				margin: $spacing-inner/3;
			}
		}

		@media screen and (min-width: $screen-medium) {
			width: 33%;
			& > * {
				margin: $spacing-inner/2;
			}
		}

		@media screen and (min-width: $screen-large) {
			width: 33%;
			& > * {
				margin: $spacing-inner;
			}
		}

	}

}





// Panels
//
// Panels are general groupings of content that need to be separated
// from the main flow of copy on a page, to either highlight content
// or direct a user towards areas to learn more via a CTA.
//
// Ideally there should not be more than 2-3 panels per page, since
// their point is to highlight content, and if everything is
// highlighted, nothing is.
//
// The fullbleed flavor of panel needs a single direct child to wrap
// its content.
//
// PatternType: organism
//
// ContainsPatterns: Links, Images, Titles, Body Copy, Cards, Navigation, Forms
//
// Markup: container_panel.html
//
// Styleguide 15.2

.panel,
.panel-fullbleed {

	background: $panel-background-primary;
	z-index: 2;
	color: $panel-font-color;
	list-style-type: none;

	%titles {
		color: $panel-font-color;
	}
	
	p,
	ul,
	img,
	li {
		margin-top: $spacing-inner;
		margin-bottom: $spacing-inner;
		padding-left: 0;
		padding-right: 0;
	}

	%form-field {
		background: lighten($panel-background-primary, 15%);
	}

	&.has-no-background {
		background: none;
	}

	& > *:first-child {
		margin-top: 0;
	}
	
	& > *:last-child {
		margin-bottom: 0;
	}

}

.panel {
	
	@include container;
	@include width-capped();

}

.panel-fullbleed {

	@include width-fullbleed();
	
	& > * {
		padding: $spacing-inner*2 $spacing-inner;
		margin: 0 auto;
	}

}